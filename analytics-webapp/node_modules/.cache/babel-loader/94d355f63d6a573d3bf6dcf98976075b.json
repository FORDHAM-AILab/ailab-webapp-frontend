{"ast":null,"code":"import _asyncToGenerator from \"/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/src/views/Portfolio.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/node_modules/@babel/runtime/regenerator/index.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Stock_info_form from \"components/Forms/FetchStockData.js\";\nimport { StockPriceChart } from \"variables/charts.js\";\nimport { SwitchTab } from \"components/Switch/ToggleSwitch\";\nimport Csv_reader from \"utils/data.js\";\nimport DynamicTable from \"components/Tables/table.js\";\nimport { ButtonDropdown, DropdownItem, DropdownMenu, DropdownToggle, Form, FormGroup, Label, Input, Button, CardSubtitle, CardColumns } from \"reactstrap\";\nimport TSNE from 'tsne-js'; // reactstrap components\n\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col } from \"reactstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction PortfolioAnalysis() {\n  _s();\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      stock_data = _useState2[0],\n      setLineData = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      data = _useState4[0],\n      setAnalyticsData = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      weights = _useState6[0],\n      setWeights = _useState6[1];\n\n  var _useState7 = useState({}),\n      _useState8 = _slicedToArray(_useState7, 2),\n      basic_info = _useState8[0],\n      setBasicInfo = _useState8[1];\n\n  var _useState9 = useState(5),\n      _useState10 = _slicedToArray(_useState9, 2),\n      var_level = _useState10[0],\n      setVarLevel = _useState10[1];\n\n  var _useState11 = useState(500),\n      _useState12 = _slicedToArray(_useState11, 2),\n      var_iterations = _useState12[0],\n      setVarIteration = _useState12[1];\n\n  var _useState13 = useState(),\n      _useState14 = _slicedToArray(_useState13, 2),\n      valueatrisk = _useState14[0],\n      setValueatrisk = _useState14[1];\n\n  var _useState15 = useState(0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      var_alpha = _useState16[0],\n      setVarAlpha = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      expected_return = _useState18[0],\n      setER = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      calculated_weights = _useState20[0],\n      setCalculatedWeights = _useState20[1]; //const [file, upLoadFile] = useState();\n  // function handleFileUpload(event) {\n  //   upLoadFile(event.target.files[0])\n  // }\n\n\n  function chart_data_parser(data) {\n    var dataset = [];\n    var labels;\n\n    if (\"date\" in data) {\n      labels = data[\"date\"];\n      delete data[\"date\"];\n    } else if (\"Date\" in data) {\n      labels = data[\"Date\"];\n      delete data[\"Date\"];\n    } else {\n      labels = _toConsumableArray(Array(Object.keys(data).length).keys());\n    }\n\n    for (var i = 0; i < Object.keys(data).length; i++) {\n      var data_dict = {\n        label: Object.keys(data)[i],\n        pointRadius: 0,\n        pointHoverRadius: 0,\n        borderWidth: 3,\n        tension: 0.4,\n        fill: false,\n        data: data[Object.keys(data)[i]]\n      };\n      dataset.push(data_dict);\n    }\n\n    ;\n    var line_chart_data = {\n      labels: labels,\n      datasets: dataset\n    };\n    return line_chart_data;\n  }\n\n  function handleOnComplete(data) {\n    var parsed_data = {};\n\n    for (var i = 0; i < data[\"data\"].length; i++) {\n      if (i == 0) {\n        for (var j = 0; j < data[\"data\"][0].length; j++) {\n          parsed_data[data[\"data\"][0][j]] = [];\n        }\n      } else {\n        for (var _j = 0; _j < data[\"data\"][i].length; _j++) {\n          parsed_data[data[\"data\"][0][_j]].push(data[\"data\"][i][_j]);\n        }\n      }\n    }\n\n    setBasicInfo({});\n    setLineData(chart_data_parser(parsed_data));\n    setAnalyticsData(parsed_data);\n  }\n\n  function handleOnRemove() {\n    setLineData({});\n    setAnalyticsData({});\n    setBasicInfo({});\n    setValueatrisk();\n  }\n\n  function EnterSpecs() {\n    function onChange(e) {\n      setWeights(e.target.value);\n    }\n\n    function onSubmit(e) {\n      e.preventDefault();\n      var weights_array = weights.split(\",\").map(Number);\n      get_basic_info(data, weights_array);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Card, {\n      children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n        children: \"Enter Specifications\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n        children: /*#__PURE__*/_jsxDEV(Form, {\n          onSubmit: onSubmit,\n          children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n            children: [/*#__PURE__*/_jsxDEV(Label, {\n              children: \"Weights (Leave blank for even weights)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              placeholder: \"e.g. 0.2, 0.2, 0.6\",\n              onChange: onChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this);\n  }\n\n  function BasicInfoCard() {\n    console.log(basic_info);\n\n    if (basic_info != null && Object.keys(basic_info).length > 0) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          className: \"analysis\",\n          children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n            children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n              tag: \"h5\",\n              children: \"Basic statistics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"card-category\",\n              children: [\"Tickers: \", tickers]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n            className: \"basic_info\",\n            children: [/*#__PURE__*/_jsxDEV(CardSubtitle, {\n              children: \"Return Statistics\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(DynamicTable, {\n              data: basic_info\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this)\n      }, void 0, false);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n    }\n  } // let model = new TSNE({\n  //   dim:2,\n  //   perplexity: 30,\n  //   earlyExaggeration: 4,\n  //   learningRate: 100,\n  //   nIter:1000,\n  //   metric: 'euclidean'\n  // })\n  // model.init({\n  //   data: Object.keys(data).map(function(key){\n  //     return data[key];\n  //   }),\n  //   type: 'dense'\n  // })\n\n\n  function WeightsOptimization() {\n    function result() {\n      if (calculated_weights != null) {\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Result: \", calculated_weights]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n      }\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Form, {\n        inline: true,\n        onSubmit: function onSubmit(e) {\n          e.preventDefault();\n          calc_weights();\n        },\n        children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Enter Portfolio expected return\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: expected_return,\n            onChange: function onChange(e) {\n              setER(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          children: \"Calculate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }, this), result()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this);\n  }\n\n  function VaRForm() {\n    function onSubmit(e) {\n      e.preventDefault();\n      console.log(Number(var_alpha));\n      calc_valueatrisk(data, weights, Number(var_level), Number(var_iterations), Number(var_alpha));\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CardSubtitle, {\n        children: \"Parameters\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        onSubmit: onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(FormGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Enter level\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: var_level,\n            type: \"text\",\n            onChange: function onChange(e) {\n              setVarLevel(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 212,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Set decay factor for EW-VaR (Default 0 for simple P-VaR)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: var_alpha,\n            type: \"text\",\n            onChange: function onChange(e) {\n              setVarAlpha(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(FormGroup, {\n          children: [/*#__PURE__*/_jsxDEV(Label, {\n            children: \"Set # of iterations for Monte Carlo VaR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            value: var_iterations,\n            type: \"text\",\n            onChange: function onChange(e) {\n              setVarIteration(e.target.value);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          children: \"Calculate\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this);\n  }\n\n  function ShowVarResult() {\n    var _this = this;\n\n    if (valueatrisk != null) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          style: {\n            paddingTop: 20\n          },\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            children: /*#__PURE__*/_jsxDEV(CardSubtitle, {\n              children: \"Results:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 11\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: Object.keys(valueatrisk).map(function (key, index) {\n            return /*#__PURE__*/_jsxDEV(Col, {\n              md: \"4\",\n              children: /*#__PURE__*/_jsxDEV(\"p\", {\n                children: [key, \": \", valueatrisk[key]]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 15\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 13\n            }, _this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  function fetch_data(_x, _x2, _x3) {\n    return _fetch_data.apply(this, arguments);\n  }\n\n  function _fetch_data() {\n    _fetch_data = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(tickers, start_date, end_date) {\n      var request_url, ticker_list, i, response, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              request_url = \"http://localhost:8888/data/load_hist_stock_price/\".concat(start_date, \"/\").concat(end_date, \"?\");\n              ticker_list = tickers.split(',').map(function (item) {\n                return item.trim();\n              });\n\n              for (i = 0; i < ticker_list.length; i++) {\n                if (i == 0) {\n                  request_url += \"q=\".concat(ticker_list[i]);\n                } else {\n                  request_url += \"&q=\".concat(ticker_list[i]);\n                }\n              }\n\n              ;\n              _context.next = 6;\n              return fetch(request_url);\n\n            case 6:\n              response = _context.sent;\n              _context.next = 9;\n              return response.json();\n\n            case 9:\n              data = _context.sent;\n              setBasicInfo({});\n              setLineData(chart_data_parser(data));\n              console.log(data);\n              setAnalyticsData(data);\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetch_data.apply(this, arguments);\n  }\n\n  function get_basic_info(_x4, _x5) {\n    return _get_basic_info.apply(this, arguments);\n  }\n\n  function _get_basic_info() {\n    _get_basic_info = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data, weights) {\n      var response, result, parsed;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return fetch('http://localhost:8888/portfolio_analysis/get_basic_info', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  data: data,\n                  weights: weights\n                })\n              });\n\n            case 2:\n              response = _context2.sent;\n              _context2.next = 5;\n              return response.json();\n\n            case 5:\n              result = _context2.sent;\n              parsed = JSON.parse(result[\"result\"]);\n              setBasicInfo(parsed);\n              console.log(parsed);\n              return _context2.abrupt(\"return\", parsed);\n\n            case 10:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _get_basic_info.apply(this, arguments);\n  }\n\n  function calc_valueatrisk(_x6, _x7, _x8, _x9, _x10) {\n    return _calc_valueatrisk.apply(this, arguments);\n  }\n\n  function _calc_valueatrisk() {\n    _calc_valueatrisk = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data, weights, var_level, var_iterations, var_alpha) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              result = fetch('http://localhost:8888/portfolio_analysis/valueatrisk', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  weights: weights,\n                  data: data,\n                  level: var_level,\n                  n: var_iterations,\n                  alpha: var_alpha\n                })\n              }).then(function (response) {\n                return response.json();\n              }).then(function (responseJSON) {\n                setValueatrisk(responseJSON[\"result\"]);\n                console.log(responseJSON[\"result\"]);\n              });\n\n            case 1:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n    return _calc_valueatrisk.apply(this, arguments);\n  }\n\n  function calc_sharpe_ratio(_x11, _x12) {\n    return _calc_sharpe_ratio.apply(this, arguments);\n  }\n\n  function _calc_sharpe_ratio() {\n    _calc_sharpe_ratio = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data, rf) {\n      var response, result, parsed;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.next = 2;\n              return fetch('http://localhost:8888/portfolio_analysis/sharpe_ratio', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  rf: rf,\n                  data: data\n                })\n              });\n\n            case 2:\n              response = _context4.sent;\n              _context4.next = 5;\n              return response.json();\n\n            case 5:\n              result = _context4.sent;\n              parsed = JSON.parse(result[\"result\"]);\n              return _context4.abrupt(\"return\", parsed);\n\n            case 8:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _calc_sharpe_ratio.apply(this, arguments);\n  }\n\n  function calc_weights() {\n    return _calc_weights.apply(this, arguments);\n  }\n\n  function _calc_weights() {\n    _calc_weights = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      var response, result, parsed;\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return fetch('http://localhost:8888/portfolio_analysis/weights_optimization', {\n                method: 'POST',\n                headers: {\n                  'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                  data: data,\n                  expected_return: expected_return\n                })\n              });\n\n            case 2:\n              response = _context5.sent;\n              _context5.next = 5;\n              return response.json();\n\n            case 5:\n              result = _context5.sent;\n              parsed = JSON.parse(result[\"result\"]);\n              console.log(parsed);\n              setCalculatedWeights(parsed);\n              return _context5.abrupt(\"return\", parsed);\n\n            case 10:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    }));\n    return _calc_weights.apply(this, arguments);\n  }\n\n  var tickers = Object.keys(data).filter(function (item) {\n    return item !== 'date';\n  }).join(\", \");\n\n  var stock_info_form = /*#__PURE__*/_jsxDEV(Stock_info_form, {\n    fetch_data: fetch_data\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 357,\n    columnNumber: 27\n  }, this);\n\n  var file_upload = /*#__PURE__*/_jsxDEV(Csv_reader, {\n    handleOnComplete: handleOnComplete,\n    handleOnRemove: handleOnRemove\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 23\n  }, this); //TODO: categorize analysis: option -> options, filter -> filters\n\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content\",\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Get Data\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              children: /*#__PURE__*/_jsxDEV(SwitchTab, {\n                Component1: stock_info_form,\n                Component2: file_upload,\n                button_name1: \"Fetch Data\",\n                button_name2: \"Upload File\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(CardBody, {\n              children: /*#__PURE__*/_jsxDEV(StockPriceChart, {\n                stock_data: stock_data\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 375,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: EnterSpecs()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: BasicInfoCard()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"analysis\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"PCA Analysis(Clusters)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 398,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-category\",\n                children: [\"Tickers: \", tickers]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 397,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              className: \"PCA\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 396,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"analysis\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"Optimization\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 412,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-category\",\n                children: [\"Tickers: \", tickers]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              className: \"PCA\",\n              children: WeightsOptimization()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 417,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: \"12\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"analysis\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: [/*#__PURE__*/_jsxDEV(CardTitle, {\n                tag: \"h5\",\n                children: \"VaR Analysis\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 428,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"card-category\",\n                children: [\"Tickers: \", tickers]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 429,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 427,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n              className: \"PCA\",\n              children: [VaRForm(), ShowVarResult()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 426,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n\n_s(PortfolioAnalysis, \"DaG4MdAO2ELkBxekLPq8KfgyMn8=\");\n\n_c = PortfolioAnalysis;\nexport default PortfolioAnalysis;\n\nvar _c;\n\n$RefreshReg$(_c, \"PortfolioAnalysis\");","map":{"version":3,"sources":["/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/src/views/Portfolio.js"],"names":["React","useEffect","useState","Stock_info_form","StockPriceChart","SwitchTab","Csv_reader","DynamicTable","ButtonDropdown","DropdownItem","DropdownMenu","DropdownToggle","Form","FormGroup","Label","Input","Button","CardSubtitle","CardColumns","TSNE","Card","CardHeader","CardBody","CardTitle","Row","Col","PortfolioAnalysis","stock_data","setLineData","data","setAnalyticsData","weights","setWeights","basic_info","setBasicInfo","var_level","setVarLevel","var_iterations","setVarIteration","valueatrisk","setValueatrisk","var_alpha","setVarAlpha","expected_return","setER","calculated_weights","setCalculatedWeights","chart_data_parser","dataset","labels","Array","Object","keys","length","i","data_dict","label","pointRadius","pointHoverRadius","borderWidth","tension","fill","push","line_chart_data","datasets","handleOnComplete","parsed_data","j","handleOnRemove","EnterSpecs","onChange","e","target","value","onSubmit","preventDefault","weights_array","split","map","Number","get_basic_info","BasicInfoCard","console","log","tickers","WeightsOptimization","result","calc_weights","VaRForm","calc_valueatrisk","ShowVarResult","paddingTop","key","index","fetch_data","start_date","end_date","request_url","ticker_list","item","trim","fetch","response","json","method","headers","body","JSON","stringify","parsed","parse","level","n","alpha","then","responseJSON","calc_sharpe_ratio","rf","filter","join","stock_info_form","file_upload"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport Stock_info_form from \"components/Forms/FetchStockData.js\";\nimport {StockPriceChart} from \"variables/charts.js\" ;\nimport { SwitchTab } from \"components/Switch/ToggleSwitch\";\nimport Csv_reader from \"utils/data.js\"\nimport DynamicTable from \"components/Tables/table.js\"\nimport {ButtonDropdown, DropdownItem, DropdownMenu, DropdownToggle, Form, FormGroup, Label, Input, Button, CardSubtitle, CardColumns} from \"reactstrap\";\nimport TSNE from 'tsne-js';\n\n// reactstrap components\nimport { Card, CardHeader, CardBody, CardTitle, Row, Col } from \"reactstrap\";\n\nfunction PortfolioAnalysis() {\n\n  const [stock_data, setLineData] = useState({});\n  const [data, setAnalyticsData] = useState({});\n  const [weights, setWeights] = useState('');\n  const [basic_info, setBasicInfo] = useState({});\n  const [var_level, setVarLevel] = useState(5)\n  const [var_iterations, setVarIteration] = useState(500);\n  const [valueatrisk, setValueatrisk] = useState();\n  const [var_alpha, setVarAlpha] = useState(0);\n  const [expected_return, setER] = useState(null);\n  const [calculated_weights, setCalculatedWeights] = useState(null)\n  //const [file, upLoadFile] = useState();\n\n  // function handleFileUpload(event) {\n  //   upLoadFile(event.target.files[0])\n  // }\n\n\n\n  function chart_data_parser(data){\n    const dataset = [];\n    let labels;\n    if (\"date\" in data){\n      labels = data[\"date\"];\n      delete data[\"date\"];\n    }\n    else if (\"Date\" in data){\n      labels = data[\"Date\"];\n      delete data[\"Date\"];\n    }\n    else{\n      labels = [...Array(Object.keys(data).length).keys()];\n    }\n    for (let i = 0; i < Object.keys(data).length; i ++){\n      let data_dict = {\n        label:Object.keys(data)[i],\n        pointRadius: 0,\n        pointHoverRadius: 0,\n        borderWidth: 3,\n        tension: 0.4,\n        fill: false,\n        data: data[Object.keys(data)[i]]};\n      dataset.push(data_dict)\n    };\n\n    const line_chart_data = {labels: labels, datasets: dataset};\n    return line_chart_data;\n  }\n\n\n\n  function handleOnComplete (data) {\n    let parsed_data = {};\n    for (let i = 0; i < data[\"data\"].length; i++){\n      if (i ==0){\n        for (let j = 0; j < data[\"data\"][0].length; j++){\n          parsed_data[data[\"data\"][0][j]]=[];\n        }\n      }\n      else{\n        for (let j = 0; j < data[\"data\"][i].length; j++){\n          parsed_data[data[\"data\"][0][j]].push(data[\"data\"][i][j]);\n        }\n      }\n    }\n    setBasicInfo({});\n    setLineData(chart_data_parser(parsed_data));\n    setAnalyticsData(parsed_data);    \n  }\n\n\n  function handleOnRemove () {\n    setLineData({});\n    setAnalyticsData({});\n    setBasicInfo({});\n    setValueatrisk()\n  }\n\n\n  function EnterSpecs (){\n    function onChange (e) {\n      setWeights(e.target.value);\n    }\n\n\n    function onSubmit (e) {\n      e.preventDefault();\n      const weights_array = weights.split(\",\").map(Number);\n      get_basic_info(data, weights_array);\n    }\n    return (\n      <Card>\n        <CardHeader>Enter Specifications</CardHeader>\n        <CardBody>\n          <Form onSubmit={onSubmit}>\n            <FormGroup>\n              <Label>Weights (Leave blank for even weights)</Label>\n              <Input placeholder=\"e.g. 0.2, 0.2, 0.6\" onChange={onChange}/>\n            </FormGroup>\n            <Button>Submit</Button>\n          </Form>\n        </CardBody>\n      </Card>\n\n    )\n  }\n\n\n\n  function BasicInfoCard() {\n    console.log(basic_info);\n    if ((basic_info != null) && (Object.keys(basic_info).length > 0)){\n      return (\n        <>\n          <Card className=\"analysis\">\n            <CardHeader>\n              <CardTitle tag=\"h5\">Basic statistics</CardTitle>\n              <p className=\"card-category\">\n                Tickers: {tickers}\n              </p>\n            </CardHeader>\n            <CardBody className=\"basic_info\">\n              <CardSubtitle>Return Statistics</CardSubtitle>\n              <DynamicTable data={basic_info} />\n\n            </CardBody>\n          </Card>\n        </>\n      )\n    }\n    else {\n      return (<></>)\n    }\n  }\n\n  // let model = new TSNE({\n  //   dim:2,\n  //   perplexity: 30,\n  //   earlyExaggeration: 4,\n  //   learningRate: 100,\n  //   nIter:1000,\n  //   metric: 'euclidean'\n  // })\n\n  // model.init({\n  //   data: Object.keys(data).map(function(key){\n  //     return data[key];\n  //   }),\n  //   type: 'dense'\n  // })\n\n\n  function WeightsOptimization() {\n    function result (){\n      if (calculated_weights != null){\n        return (\n          <p>Result: {calculated_weights}</p>\n        )\n      }\n      else {\n        return (<></>)\n      }\n    }\n    return (\n      <div>\n      <Form inline onSubmit={(e) => {\n        e.preventDefault();\n        calc_weights();\n      }}>\n        <FormGroup>\n          <Label>Enter Portfolio expected return</Label>\n          <Input value={expected_return} onChange={(e)=>{setER(e.target.value)}}/>\n        </FormGroup>\n        <Button>Calculate</Button>\n      </Form>\n      {result()}\n      </div>\n    )\n  }\n\n\n  function VaRForm() {\n\n    function onSubmit(e){\n      e.preventDefault();\n      console.log(Number(var_alpha));\n      calc_valueatrisk(data, weights, Number(var_level), Number(var_iterations), Number(var_alpha)); \n    }\n\n    return (\n      <div>\n      <CardSubtitle>Parameters</CardSubtitle>\n      <Form onSubmit={onSubmit}>\n        \n        <FormGroup>\n          <Label>\n            Enter level\n          </Label>\n          <Input value={var_level} type=\"text\" onChange={(e)=>{setVarLevel(e.target.value)}}/>\n            \n        </FormGroup>\n        <FormGroup>\n            <Label>Set decay factor for EW-VaR (Default 0 for simple P-VaR)</Label>\n            <Input value={var_alpha} type=\"text\" onChange={(e) => {setVarAlpha(e.target.value)}}/>\n        </FormGroup>\n        <FormGroup>\n            <Label>Set # of iterations for Monte Carlo VaR</Label>\n            <Input value={var_iterations} type=\"text\" onChange={(e) => {setVarIteration(e.target.value)}}/>\n        </FormGroup>\n        <Button>Calculate</Button>\n      </Form>\n      </div>\n    )\n  }\n\n  function ShowVarResult() {\n    if (valueatrisk != null) {\n\n      return (\n        <div>\n          <Row style={{paddingTop:20}}>\n            <Col>\n          <CardSubtitle>Results:</CardSubtitle>\n          </Col>\n          </Row>\n          <Row>\n          {Object.keys(valueatrisk).map((key,index)=>(\n            <Col md=\"4\">\n              <p key={index}>{key}: {valueatrisk[key]}</p>\n            </Col>\n          ))}\n          </Row>\n        </div>\n      )\n    }\n  }\n\n\n\n  async function fetch_data (tickers, start_date, end_date) {\n    \n    let request_url = `http://localhost:8888/data/load_hist_stock_price/${start_date}/${end_date}?`;\n    const ticker_list = tickers.split(',').map(function(item){\n      return item.trim();\n    })\n    for (let i = 0; i < ticker_list.length; i++){\n      if (i == 0){\n        request_url += `q=${ticker_list[i]}`;\n      }\n      else{\n        request_url += `&q=${ticker_list[i]}`;\n      }\n      \n    };\n    const response = await fetch(request_url);\n    const data = await response.json();\n    setBasicInfo({})\n    setLineData(chart_data_parser(data));\n    console.log(data)\n    setAnalyticsData(data);\n  }\n\n  async function get_basic_info(data, weights) {\n    const response = await fetch('http://localhost:8888/portfolio_analysis/get_basic_info', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        data: data,\n        weights: weights\n      })\n    })\n\n    const result = await response.json();\n    const parsed = JSON.parse(result[\"result\"])\n    setBasicInfo(parsed);\n    console.log(parsed);\n    return parsed\n  }\n\n  async function calc_valueatrisk(data, weights, var_level, var_iterations, var_alpha){\n    const result = fetch('http://localhost:8888/portfolio_analysis/valueatrisk', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        weights: weights,\n        data: data,\n        level: var_level,\n        n: var_iterations,\n        alpha: var_alpha,\n      })\n    }).then((response) => response.json()).then(\n      (responseJSON) => {setValueatrisk(responseJSON[\"result\"]);\n      console.log(responseJSON[\"result\"])}\n    )\n  }\n  \n  async function calc_sharpe_ratio(data, rf){\n    const response = await fetch('http://localhost:8888/portfolio_analysis/sharpe_ratio', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        rf: rf,\n        data: data\n      })\n    })\n\n    const result = await response.json();\n    const parsed = JSON.parse(result[\"result\"])\n    return parsed\n  }\n\n\n  async function calc_weights(){\n    const response = await fetch('http://localhost:8888/portfolio_analysis/weights_optimization', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        data: data,\n        expected_return: expected_return\n      })\n    })\n\n    const result = await response.json();\n    const parsed = JSON.parse(result[\"result\"])\n    console.log(parsed)\n    setCalculatedWeights(parsed)\n    return parsed\n  }\n\n\n\n\n\n  const tickers = Object.keys(data).filter(item => item !== 'date').join(\", \");\n\n  const stock_info_form = <Stock_info_form fetch_data={fetch_data}/>;\n  const file_upload = <Csv_reader handleOnComplete={handleOnComplete} handleOnRemove={handleOnRemove}/>;\n  //TODO: categorize analysis: option -> options, filter -> filters\n  return (\n    <>\n      <div className=\"content\">\n      <Row>\n        <Col md=\"12\">\n          <Card>  \n            <CardHeader>\n                  <CardTitle tag=\"h5\">Get Data</CardTitle>\n            </CardHeader>\n            <CardBody>\n              <SwitchTab Component1 = {stock_info_form} Component2 = {file_upload} button_name1 = \"Fetch Data\" button_name2 = \"Upload File\"/>\n            </CardBody>\n          </Card>\n        </Col>\n      </Row>\n      <Row>\n        <Col md=\"12\">\n            <Card>\n              <CardBody>\n                <StockPriceChart stock_data={stock_data} />\n              </CardBody>\n            </Card>\n        </Col>\n      </Row>\n      <Row>\n        <Col>\n          {EnterSpecs()}\n        </Col>\n      </Row>\n      <Row>\n        <Col md=\"12\">\n          {BasicInfoCard()}\n        </Col>\n      </Row>\n      <Row>\n        <Col md=\"12\">\n          <Card className=\"analysis\">\n            <CardHeader>\n              <CardTitle tag=\"h5\">PCA Analysis(Clusters)</CardTitle>\n              <p className=\"card-category\">\n                Tickers: {tickers}\n              </p>\n            </CardHeader>\n            <CardBody className=\"PCA\">\n            </CardBody>\n          </Card>\n        </Col>\n      </Row>\n      <Row>\n        <Col md=\"12\">\n          <Card className=\"analysis\">\n            <CardHeader>\n              <CardTitle tag=\"h5\">Optimization</CardTitle>\n              <p className=\"card-category\">\n                Tickers: {tickers}\n              </p>\n            </CardHeader>\n            <CardBody className=\"PCA\">\n              {WeightsOptimization()}\n            </CardBody>\n          </Card>\n        </Col>\n      </Row>\n      \n      <Row>\n        <Col md=\"12\">\n          <Card className=\"analysis\">\n            <CardHeader>\n              <CardTitle tag=\"h5\">VaR Analysis</CardTitle>\n              <p className=\"card-category\">\n                Tickers: {tickers}\n              </p>\n            </CardHeader>\n            <CardBody className=\"PCA\">\n              {VaRForm()}\n              {ShowVarResult()}\n            </CardBody>\n          </Card>\n        </Col>\n      </Row>\n      </div>\n    </>\n  );\n}\n\nexport default PortfolioAnalysis;\n"]},"metadata":{},"sourceType":"module"}