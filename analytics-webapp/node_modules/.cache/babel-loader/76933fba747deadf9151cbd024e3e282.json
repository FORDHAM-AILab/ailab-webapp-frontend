{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (data, metric) {\n  var nSamples = data.shape[0];\n  var distance = (0, _ndarray2.default)(new Float64Array(nSamples * nSamples), [nSamples, nSamples]);\n\n  switch (metric) {\n    case 'euclidean':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = euclidean(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n\n      break;\n\n    case 'manhattan':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = manhattan(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n\n      break;\n\n    case 'jaccard':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = jaccard(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n\n      break;\n\n    case 'dice':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = dice(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n\n      break;\n\n    default:\n  }\n\n  return distance;\n};\n\nvar _ndarray = require('ndarray');\n\nvar _ndarray2 = _interopRequireDefault(_ndarray);\n\nvar _cwise = require('cwise');\n\nvar _cwise2 = _interopRequireDefault(_cwise);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n} // Euclidean distance\n\n\nvar euclidean = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.sum = 0.0;\n  },\n  body: function body(a, b) {\n    var d = a - b;\n    this.sum += d * d;\n  },\n  post: function post(a, b) {\n    return Math.sqrt(this.sum);\n  }\n}); // Manhattan distance\n\nvar manhattan = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.sum = 0.0;\n  },\n  body: function body(a, b) {\n    this.sum += Math.abs(a - b);\n  },\n  post: function post(a, b) {\n    return this.sum;\n  }\n}); // Jaccard dissimilarity\n\nvar jaccard = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.tf = 0.0;\n    this.tt = 0.0;\n  },\n  body: function body(a, b) {\n    var a_bool = Math.round(a);\n    var b_bool = Math.round(b);\n    this.tf += +(a_bool != b_bool);\n    this.tt += +(a_bool == 1 && b_bool == 1);\n  },\n  post: function post(a, b) {\n    if (this.tf + this.tt === 0) return 1.0;\n    return this.tf / (this.tf + this.tt);\n  }\n}); // Dice dissimilarity\n\nvar dice = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.tf = 0.0;\n    this.tt = 0.0;\n  },\n  body: function body(a, b) {\n    var a_bool = Math.round(a);\n    var b_bool = Math.round(b);\n    this.tf += +(a_bool != b_bool);\n    this.tt += +(a_bool == 1 && b_bool == 1);\n  },\n  post: function post(a, b) {\n    if (this.tf + this.tt === 0) return 1.0;\n    return this.tf / (this.tf + 2 * this.tt);\n  }\n});\nmodule.exports = exports['default'];","map":{"version":3,"sources":["/Users/xuanmingcui/Documents/projects/ailab-webapp-frontend/analytics-webapp/node_modules/tsne-js/dist/pairwise-distances.js"],"names":["Object","defineProperty","exports","value","default","data","metric","nSamples","shape","distance","_ndarray2","Float64Array","i","j","d","euclidean","pick","set","manhattan","jaccard","dice","_ndarray","require","_interopRequireDefault","_cwise","_cwise2","obj","__esModule","args","pre","a","b","sum","body","post","Math","sqrt","abs","tf","tt","a_bool","round","b_bool","module"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = function (data, metric) {\n  var nSamples = data.shape[0];\n  var distance = (0, _ndarray2.default)(new Float64Array(nSamples * nSamples), [nSamples, nSamples]);\n\n  switch (metric) {\n    case 'euclidean':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = euclidean(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n      break;\n    case 'manhattan':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = manhattan(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n      break;\n    case 'jaccard':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = jaccard(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n      break;\n    case 'dice':\n      for (var i = 0; i < nSamples; i++) {\n        for (var j = i + 1; j < nSamples; j++) {\n          var d = dice(data.pick(i, null), data.pick(j, null));\n          distance.set(i, j, d);\n          distance.set(j, i, d);\n        }\n      }\n      break;\n    default:\n  }\n\n  return distance;\n};\n\nvar _ndarray = require('ndarray');\n\nvar _ndarray2 = _interopRequireDefault(_ndarray);\n\nvar _cwise = require('cwise');\n\nvar _cwise2 = _interopRequireDefault(_cwise);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// Euclidean distance\nvar euclidean = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.sum = 0.0;\n  },\n  body: function body(a, b) {\n    var d = a - b;\n    this.sum += d * d;\n  },\n  post: function post(a, b) {\n    return Math.sqrt(this.sum);\n  }\n});\n\n// Manhattan distance\nvar manhattan = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.sum = 0.0;\n  },\n  body: function body(a, b) {\n    this.sum += Math.abs(a - b);\n  },\n  post: function post(a, b) {\n    return this.sum;\n  }\n});\n\n// Jaccard dissimilarity\nvar jaccard = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.tf = 0.0;\n    this.tt = 0.0;\n  },\n  body: function body(a, b) {\n    var a_bool = Math.round(a);\n    var b_bool = Math.round(b);\n    this.tf += +(a_bool != b_bool);\n    this.tt += +(a_bool == 1 && b_bool == 1);\n  },\n  post: function post(a, b) {\n    if (this.tf + this.tt === 0) return 1.0;\n    return this.tf / (this.tf + this.tt);\n  }\n});\n\n// Dice dissimilarity\nvar dice = (0, _cwise2.default)({\n  args: ['array', 'array'],\n  pre: function pre(a, b) {\n    this.tf = 0.0;\n    this.tt = 0.0;\n  },\n  body: function body(a, b) {\n    var a_bool = Math.round(a);\n    var b_bool = Math.round(b);\n    this.tf += +(a_bool != b_bool);\n    this.tt += +(a_bool == 1 && b_bool == 1);\n  },\n  post: function post(a, b) {\n    if (this.tf + this.tt === 0) return 1.0;\n    return this.tf / (this.tf + 2 * this.tt);\n  }\n});\n\nmodule.exports = exports['default'];"]},"metadata":{},"sourceType":"script"}